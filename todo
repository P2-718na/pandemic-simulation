General todos:
- change cast to c++ style cast

- general cleanup of the code.
- check cmake includes and linking
